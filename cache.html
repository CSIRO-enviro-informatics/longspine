---
layout: page
title: "Cache"
permalink: cache
---
    <h1>LongSpine Cache</h1>
    <section>
      <p>
          All of the models and data for LongSpine listed on the <a href="models">Models</a> &amp; <a href="data">Data</a> pages are loaded into the cache that this page details and which the <a href="sparql">Query endpoint</a> page provides query access to. This allows you to run either the example queries listed on the <a href="examples">Examples</a> page or, in fact, any <a href="http://www.w3.org/TR/sparql11-query/">SPARQL query language</a> queries you wish!
      </p>
      <h3>Cache sections</h3>
      <ul>
          <li><sup><a href="#what">&darr;</a></sup> What is the cache?</li>
          <li><sup><a href="#namedgraphs">&darr;</a></sup> Named Graphs</li>
          <li><sup><a href="#inferencing">&darr;</a></sup> Inferencing</li>
          <li><sup><a href="#dataloading">&darr;</a></sup> Data Loading</li>
          <li><sup><a href="#extending">&darr;</a></sup> Extending the cache</li>
          <li><sup><a href="#system">&darr;</a></sup> System technical details</li>
      </ul>
    </section>
    <section>
      <h2 id="what"><a href="#what">&#167;</a> What is the cache? <sup><a href="">&uarr;</a></sup></h2>
      <p>
          The LongSpine cache is an <a href="https://www.w3.org/2001/sw/wiki/RDF">RDF</a> <em><a href="https://en.wikipedia.org/wiki/Triplestore"></a>triplestore</em>, that is, a node-and-edge graph database that stores RDF data. The cache's purpose is to allow queries across all the elements loaded into it so you can use it to query from vocab to vocab (via Linksets), vocab to Dataset and across Datasets.
      </p>
      <p>
          Since this is an RDF triplestore, the  <a href="http://www.w3.org/TR/sparql11-query/">SPARQL query language</a> is supported. You may either place queries directly into the text box which the <a href="sparql">Query endpoint</a> page provides or you may lodge queries as web address Query String Argument URLs - see the Query endpoint page for details.
      </p>
      <h4>What the cache is not</h4>
      <p>
          The cache itself is <strong><em>NOT</em></strong> the LongSpine's <em>spine</em>! As noted in the <a href="principles#spine">Principles Page's <em>Spine section</em></a>, the spine is "...a collection of datasets and methods for data presentation that act as an anchor point for other data..." thus the spine <strong>is</strong> the LongSpine outputs and the fact that they have common purpose. This cache is only a convenient way to access all of the spine's content.
      </p>
      <p>
          This spine/cache distinction must be made since it's possible to create multiple or partial caches of the LongSpine's spine for multiple purposes and the conveninence of the cache shouldn't distract from the spine's points-of-truth which are the hole (namespace) locations of the models and datasets which the <a href="models">Models</a> &amp; <a href="data">Data</a> pages list.
      </p>
    </section>
    <section>
      <h2 id="namedgraphs"><a href="#namedgraphs">&#167;</a> Named Graphs <sup><a href="">&uarr;</a></sup></h2>
      <p>
          Each ontology, vocabulary, Dataset &amp; Linkset loaded into this cache is partitioned off from other loaded element by placing it into it's own <a href="https://en.wikipedia.org/wiki/Named_graph">Named Graph</a>. These are somewhat like relational database's schemas - namespace-separated collections of tables within a single database - in that they allow all the data in a Named Graph to managed as a single unit (removed, updated, reloaded) without affecting other Named Graphs' content, and they also allow both queries within and across Named Graphs.
      </p>
      <h3>Querying data in Named Graphs</h3>
      <p>
          Like with SQL queries across or within particular <em>schema</em>, SPARQL queries can be written that query all the data in the cache as one or just the data in one or more identified Named Graphs. This query gets all <code>skos:Concept</code> instances from the cache, regardless of the Named Graph they are in:
      </p>
<pre>PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt;
SELECT *
WHERE {
    ?c a skos:Concept .
}</pre>
      <p>
          This query only gets <code>skos:Concept</code> instances from the <a href="data#datasets">COFOG-A</a> vocabulary:
      </p>
<pre>PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt;
SELECT *
FROM &lt;http://linked.data.gov.au/def/cofog-a&gt;
WHERE {
    ?c a skos:Concept .
}</pre>
      <p>
          Note that since the models' data and the datasets' data are separated out into their own Named Graphs, you will need to combine appropriate models with datasets if you write queries that rely on model rules. By far the easiest thing is to just query the whole cache.
      </p>
      <p>
          See the <a href="https://www.w3.org/TR/sparql11-query/#namedGraphs">SPARQL query language section on Named Graphs</a> for more.
      </p>
      <h3>Named Graph details</h3>
      <p>
          All items in the cache are given Named Graph IDs which are their namespace URIs. Table C1 lists all the items in the cache and givens their Named Graph IDs which can be used in <code>FROM</code> clauses in SPARQL queries.
      </p>
      <p class="caption"><strong>Table C1:</strong> Named Graphs in the LongSpine Cache</p>
      <table class="layout">
          <tr>
            <th>Item</th>
            <th>Named Graph URI</th>
            <th>Access URI</th>
          </tr>
          <tr>
              <th colspan="3" style="text-align:center;">Background Ontologies</th>
          </tr>
          <tr>
            <td>Resource Description Framework (RDF)</td>
            <td><a href="http://www.w3.org/1999/02/22-rdf-syntax-ns">http://www.w3.org/1999/02/22-rdf-syntax-ns</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>RDF Schema (RDFS)</td>
            <td><a href="http://www.w3.org/2000/01/rdf-schema">http://www.w3.org/2000/01/rdf-schema</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>Web Ontology Language (OWL)</td>
            <td><a href="http://www.w3.org/2002/07/owl">http://www.w3.org/2002/07/owl</a></td>
            <td>same</td>
          </tr>
          <!--
          <tr>
            <td>Dublin Core Terms</td>
            <td><a href="http://purl.org/dc/terms">http://purl.org/dc/terms</a></td>
          </tr>
          -->
          <!--
          <tr>
            <td>schema.org</td>
            <td><a href="https://schema.org">https://schema.org</a></td>
          </tr>
          -->
          <tr>
            <td>Time Ontology in OWL (TIME)</td>
            <td><a href="http://www.w3.org/2006/time">http://www.w3.org/2006/time</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>The Dataset Catalogue Vocabulary (DCAT)</td>
            <td><a href="http://www.w3.org/ns/dcat">http://www.w3.org/ns/dcat</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>Vocabulary of Interlinked Datasets (VoID)</td>
            <td><a href="http://rdfs.org/ns/void">http://rdfs.org/ns/void</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>LocI Ontology</td>
            <td><a href="http://linked.data.gov.au/def/loci">http://linked.data.gov.au/def/loci</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>Simple Knowledge Organization System (SKOS)</td>
            <td><a href="http://www.w3.org/2004/02/skos/core">http://www.w3.org/2004/02/skos/core</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>The Organization Ontology (ORG)</td>
            <td><a href="http://www.w3.org/ns/org">http://www.w3.org/ns/org</a></td>
            <td>same</td>
          </tr>
          <tr>
              <th colspan="3" style="text-align:center;">LongSpine Ontologies</th>
          </tr>
          <tr>
            <td>LongSpine Ontology</td>
            <td><code>http://linked.data.gov.au/def/longspine</code></td>
            <td><a href="http://test.linked.data.gov.au/def/longspine">http://test.linked.data.gov.au/def/longspine</a></td>
          </tr>
          <tr>
            <td>Administrative Arrangement Orders (AAO) Ontology</td>
            <td><code>http://linked.data.gov.au/def/longspine</code></td>
            <td><a href="http://test.linked.data.gov.au/def/aao">http://test.linked.data.gov.au/def/aao</a></td>
          </tr>
          <tr>
            <td>AGOR Ontology</td>
            <td><code>http://linked.data.gov.au/def/longspine</code></td>
            <td><a href="http://test.linked.data.gov.au/def/agor">http://test.linked.data.gov.au/def/agor</a></td>
          </tr>
          <tr>
            <td>Commonwealth Record Series (CRS) Ontology</td>
            <td><code>http://linked.data.gov.au/def/longspine</code></td>
            <td><a href="http://linked.data.gov.au/def/crs">http://linked.data.gov.au/def/crs</a></td>
          </tr>
          <tr>
            <td>Portfolio Budget Statements (PBS) Ontology</td>
            <td><code>http://linked.data.gov.au/def/longspine</code></td>
            <td><a href="http://test.linked.data.gov.au/def/pbs">http://test.linked.data.gov.au/def/pbs</a></td>
          </tr>
          <tr>
            <td>Records Disposal Authority (RDA) Ontology</td>
            <td><code>http://linked.data.gov.au/def/longspine</code></td>
            <td><a href="http://test.linked.data.gov.au/def/rda">http://test.linked.data.gov.au/def/rda</a></td>
          </tr>
          <tr>
              <th colspan="3" style="text-align:center;">LongSpine Vocabularies</th>
          </tr>
          <tr>
            <td>Australian Government Interactive Functions Thesaurus (AGIFT)</td>
            <td><a href="http://data.naa.gov.au/def/agift">http://data.naa.gov.au/def/agift</a></td>
            <td>same</td>
          </tr>
          <tr>
            <td>Classifications of Functions of Government (COFOG)</td>
            <td><code>http://linked.data.gov.au/def/cofog</code></td>
            <td><a href="http://test.linked.data.gov.au/def/cofog">http://test.linked.data.gov.au/def/cofog</a></td>
          </tr>
          <tr>
            <td>Classifications of Functions of Government - Australia (COFOG-A)</td>
            <td><code>http://linked.data.gov.au/def/cofog-a</code></td>
            <td><a href="http://test.linked.data.gov.au/def/cofog-a">http://test.linked.data.gov.au/def/cofog-a</a></td>
          </tr>
          <tr>
            <td>Commonwealth Record Series Thesaurus (CRS-Th) </td>
            <td><code>http://linked.data.gov.au/def/crs-th</code></td>
            <td><a href="http://test.linked.data.gov.au/def/crs-th">http://test.linked.data.gov.au/def/crs-th</a></td>
          </tr>
          <tr>
            <td>Government Purpose Classification (GPC)</td>
            <td><code>http://linked.data.gov.au/def/gpc</code></td>
            <td><a href="http://test.linked.data.gov.au/def/gpc">http://test.linked.data.gov.au/def/gpc</a></td>
          </tr>
          <tr>
            <td>Local Government Purpose Classification (LGPC)</td>
            <td><code>http://linked.data.gov.au/def/lgpc</code></td>
            <td><a href="http://test.linked.data.gov.au/def/lgpc">http://test.linked.data.gov.au/def/lgpc</a></td>
          </tr>
          <tr>
            <td>Records Disposal Authority (RDA) Vocabulary</td>
            <td><code>http://linked.data.gov.au/def/rda-voc</code></td>
            <td><a href="http://test.linked.data.gov.au/def/rda-voc">http://test.linked.data.gov.au/def/rda-voc</a></td>
          </tr>
          <tr>
              <th colspan="3" style="text-align:center;">LongSpine Datasets</th>
          </tr>
          <tr>
            <td>Administrative Arrangements Orders (AAO) Dataset</td>
            <td><em>not loaded yet</em></td>
            <td><a href="http://test.linked.data.gov.au/dataset/aao">http://test.linked.data.gov.au/dataset/aao</a></td>
          </tr>
          <tr>
            <td>Australian Government Organisations Register (AGOR)</td>
            <td><em>not loaded yet</em></td>
            <td><a href="http://test.linked.data.gov.au/dataset/agor">http://test.linked.data.gov.au/dataset/agor</a></td>
          </tr>
          <tr>
            <td>Commonwealth Record Series (CRS) Dataset</td>
            <td><code>http://linked.data.gov.au/dataset/crs</code></td>
            <td><a href="http://test.linked.data.gov.au/dataset/crs">http://test.linked.data.gov.au/dataset/crs</a></td>
          </tr>
          <tr>
            <td>Portfolio Budget Statements (PBS) Dataset</td>
            <td><em>not loaded yet</em></td>
            <td><a href="http://test.linked.data.gov.au/dataset/pbs">http://test.linked.data.gov.au/dataset/pbs</a></td>
          </tr>
          <tr>
              <th colspan="3" style="text-align:center;">LongSpine Linksets</th>
          </tr>
          <tr>
            <td>AGIFT &rarr; CRS Thesaurus Linkset</td>
            <td><code>http://linked.data.gov.au/dataset/agiftcrs</code></td>
            <td><a href="http://test.linked.data.gov.au/dataset/agiftcrs">http://test.linked.data.gov.au/dataset/agiftcrs</a></td>
          </tr>
          <tr>
            <td>AGIFT &rarr; COFOG-A Linkset</td>
            <td><code>http://linked.data.gov.au/dataset/agiftcofoga</code></td>
            <td><a href="http://test.linked.data.gov.au/dataset/agiftcofoga">http://test.linked.data.gov.au/dataset/agiftcofoga</a></td>
          </tr>
          <tr>
            <td>COFOG &rarr; COFOG-A Linkset</td>
            <td><code>http://linked.data.gov.au/dataset/cofogcofoga</code></td>
            <td><a href="http://test.linked.data.gov.au/dataset/cofogcofoga">http://test.linked.data.gov.au/dataset/cofogcofoga</a></td>
          </tr>
          <tr>
            <td>LGPC &rarr; COFOG Linkset</td>
            <td><code>http://linked.data.gov.au/dataset/lgpccofog</code></td>
            <td><a href="http://test.linked.data.gov.au/dataset/lgpccofog">http://test.linked.data.gov.au/dataset/lgpccofog</a></td>
          </tr>
          <tr>
            <td>LGPC &rarr; GPC Linkset</td>
            <td><code>http://linked.data.gov.au/dataset/lgpcgpc</code></td>
            <td><a href="http://test.linked.data.gov.au/dataset/lgpcgpc">http://test.linked.data.gov.au/dataset/lgpcgpc</a></td>
          </tr>
      </table>
      <p>
          The Dublin Core Terms <a href="http://purl.org/dc/terms">http://purl.org/dc/terms</a> and <a href="https://schema.org">schema.org</a> background ontologies, listed on the <a href="models">Models</a> page aren't loaded into the cache as neither provide any ontological rules useful to build new data (see the <a href="#inferencing">Inferencing</a> section next). Both essentially provide vocabularies of properties used for annotations only.
      </p>
    </section>
    <section>
      <h2 id="inferencing"><a href="#inferencing">&#167;</a> Inferencing <sup><a href="">&uarr;</a></sup></h2>
      <p>
          Triplestores, such as the one used for this LongSpine cache, are able to take reasoning rules added to them, usually in the form of ontology statements, and apply them to data. This has the effect of "building out" all the data that the rules indicate. This for of reasoning with RDF data is called <em>inference</em>.
      </p>
      <p>
          For example, the ontological rule in the LongSpine ontology <code>agor:Entity rdfs:subClassOf long:GovernmentStructuralUnit .</code> will cause a triple stating that every instance of a <code>agor:Entity</code> will be also typed as being a <code>long:GovernmentStructuralUnit</code> since, as per the rule, everything that is a <code>agor:Entity</code> is also a  <code>long:GovernmentStructuralUnit</code>.
      </p>
      <p>
          When reasoning is performed at load time, i.e. ontological rules in the triplestore are applied to data as it's loaded or applied to stored data when an ontology is loaded, then it is called <em>forward-chain inference</em>.
      </p>
      <p>
          The triplestore used for this cache applies all the ontological rules it finds in all loaded ontologies to all data within the family of rules known as <a href="https://www.w3.org/TR/owl2-profiles/#OWL_2_RL">OWL-RL</a> which are, by design, amenable to rule-based technologies meaning. This means while calculating all the ontology rule possibilities for <em>forward-chaining</em> all loaded data takes some time, it takes less time than some other, more expressive, OWL profiles which are not needed for any LongSpine ontological rules.
      </p>
    </section>
    <section>
      <h2 id="dataloading"><a href="#dataloading">&#167;</a> Data Loading <sup><a href="">&uarr;</a></sup></h2>
      <p>
          All of the items listed in Table C1 are loaded into this cache in a 2-step manner using two scripts:
      </p>
      <ol>
          <li><strong><a href="files/get_rdf">files/get_rdf.py</a></strong> - a Python script which downloads a copy of each item's RDF data from the Internet and stored it in a single directory</li>
          <li><strong><a href="files/load_rdf">files/load_rdf.py</a></strong> - a Python script which uses a the API that come with this triplestore to both load all of the RDF file and perform forward-chain reasoning as per OWL-RL and the ontological rules in the ontologies (see section above)</li>
      </ol>
      <p>
          The Python scripts can be used to assemble all of the cache's data in one place and many triplestores have commands/script to load them and apply inference using RDF files.
      </p>
    </section>
    <section>
      <h2 id="extending"><a href="#extending">&#167;</a> Extending the cache <sup><a href="">&uarr;</a></sup></h2>
      <p>
          To extend this particular cache of the LongSpine information, that information - perhaps new vocabularies of government functions or longitudinal data of government structural units - should be accepted as being part of LongSpine and listed on the <a href="data">Data Page</a>. Then it's just a matter of, either manually or via a script, loading the new data into the database that this cache uses while ensuring that the new information is placed in an appropriately named Named Graph.
      </p>
      <p style="font-style:italic;">
          Currently, the governance of what is in and what is not in LongSpine hasn't been codified.
      </p>
      <p>
          If non-LongSpine data is to be loaded into this cache, perhaps to demonstrate how others may use the LongSpine by joining their own (external) data to it, then that data can also be loaded into additional Named Graphs within this database. Individual Named Graph can be cleared from this database by a database admin so graphs can be added and later removed without compromising the rest of the cache.
      </p>
      <p>
          The scripts given above can be used to create another cache of LongSpine + any other information so should someone want to greatly extend the cache, or to perhaps just load a portion of it, they should use/extend the scripts to do that.
      </p>
    </section>
    <section>
      <h2 id="system"><a href="#system">&#167;</a> System technical details <sup><a href="">&uarr;</a></sup></h2>
      <p>
          The specific systems powering this cache of LongSpine are:
      </p>
      <ul>
          <li>
              <strong>Database</strong> - <a href="https://www.ontotext.com/products/graphdb/">Ontotext's GraphDB</a>
              <ul>
                  <li><a href="https://www.ontotext.com/products/graphdb/#free_edition">free edition</a></li>
                  <li>version 8.8</li>
                  <li>a single Repository is used for all LongSpine Named Graphs with OWL-RL inferencing turned on in the Repository config</li>
              </ul>
          </li>
          <li>
              <strong>Website</strong> - <a href="https://palletsprojects.com/p/flask/">Python Flask</a>
              <ul>
                  <li>a very simple web framework with URLs calling python functions that generate HTML by using Python's Jinja2 templates</li>
                  <li>the website only implements 8 endpoints, one for each website page, and a couple of helper functions for authentication</li>
              </ul>
          </li>
          <li>
              <strong>Query page</strong> - HTML, JavaScript + <a href="https://doc.yasgui.org/">YASGUI</a>
              <ul>
                  <li>the query page is loaded like all others by the Flask application</li>
                  <li>the fancy query box is presented by the YASGUI tool embedded in the query page's HTML</li>
                  <li>queries from this page are posted to the GraphDB database's query endpoint by YASGUI and results from it collected and displayed also by YASGUI</li>
              </ul>
          </li>
          <li>
              <strong>Server</strong> - CSIRO-owned Amazon Web Services Linux Virtual Machine
              <ul>
                  <li>all of the items in this systems - database, website etc., are all hosted on a single virtual machine in AWS</li>
                  <li>alternate hosting may be appropriate if the site starts to experience much traffic</li>
              </ul>
          </li>
          <li>
              <strong>Persistent URIs</strong> - <a href="http://www.linked.data.gov.au/">Australian Government Linked Data Working Group</a>
              <ul>
                  <li>all URIs used by LongSpine data within the <code>linked.data.gov.au</code> domain or subdomains of it are managed by the Liked Data WG</li>
                  <li>required changes to LD WG URIs, or new URIs, need to be managed through the group</li>
              </ul>
          </li>
      </ul>
    </section>